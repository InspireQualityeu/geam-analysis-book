---
author:
  - name: Jörg Müller
  
execute: 
    echo: true
    warning: false
    message: false
    
abstract: >
    The following chapter provides an overview of the main socio-demographic variables of the GEAM questionnaire. It briefly introduces each variable and present the most suitable way to describe and visualise the available information.  
---

# Summarising respondents data

```{r}
#| echo: false

library(tidyverse)
library(gpg)
library(sjmisc)
library(knitr)
library(kableExtra)

source("util/common.R")
source("util/encrypt.R")

# at the start of the session, need to execute this first time manually to get password callback
df.geam <- read_gpg("data/df.343696.en.rdata.gpg")

df.geam2 <-read_gpg("data/df.784191.en.rdata.gpg") 

```

The GEAM questionnaire gathers various socio-demographic variables from respondents, including gender, age, sexual orientation, ethnic minority status, disability and/or health impairments, socio-economic class, partnership status, transgender status, and educational level. This socio-demographic information forms the basis for identifying differences between specific groups of respondents concerning select outcomes, such as experiences of discrimination or job satisfaction. Additionally, combinations of these socio-demographic variables enable the exploration of intersectional analyses of GEAM data, revealing how certain combinations of these variables identify particularly disadvantaged sub-groups.

::: column-margin
See @sec-intersectional-ch06 for a more detailed example of how to perform an intersectional, outcome oriented analysis of selected GEAM variables.
:::

In what follows, we briefly introduce each of the available socio-demographic variables and show how to best summarise the available information. Each variable introduced briefly presents the available answer options.

::: column-margin
Information on the specific choices of answer options for each variable is availble in @guyanDevelopmentGenderEquality2022
:::

## Sociodemographic variables

### Gender

The GEAM includes a standard question about gender identity of the respondent which allows for four answer options. Compared to other recommended approaches to ask about gender especially in the context of health research [@stadlerDiversifiedInnovationsHealth2023], this is a relatively simple yet effective approach to capture the most important differences in an organisational context.

+----------------+-------------------+-----------------------------------+
| Code           | Question          | Responses                         |
+================+===================+===================================+
| `SDEM004`      | Are you...        | \[1\] A man\                      |
|                |                   | \[2\] Non-binary\                 |
|                |                   | \[3\] A woman\                    |
|                |                   | \[4\] Prefer not to say\          |
|                |                   | \[5\] Prefer to self-identify as: |
+----------------+-------------------+-----------------------------------+

Responses regarding gender ('SEM004') are then easily summarised with a frequency table or bar chart that demonstrates that answer option '\[2\] Non-binary' or '\[4\] Prefer not to say' or '\[5\] Prefer to self-identify as:" are comparatively few.

As the simple frequency table for 'SDEM004' demonstrates, only 2 respondents have selected '\[4\] Prefer not to say' in this example dataset with answer options '\[2\] Non-binary' and '\[5\] Other' having received no responses. 

```{r}
#| label: tbl-sdem004
#| tbl-cap: "Frequency table for SDEM004 - Gender"
#| cap-location: margin

df.geam |>
  frq(SDEM004) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_styling(bootstrap_options = c("striped"))

```

::: column-margin

The R code for producing simple frequency tables is shown for the first table of this chapter. All subsequent tables follow the same code but are hidden to improve readability of the text.
:::

:::{.callout-note}
In the most recent GEAM version (since v3.0) "Other" as answer-option has been replaced with "Prefer to self-identify as" to avoid othering. As some of our data has been collected with previous GEAM versions, the "Other" label might still be visible in frequency tables and illustrations. 
:::

The frequency table can then be transformed into a bar chart, indicating the absolute counts.

```{r}
#| label: fig-sdem004
#| fig-cap: "SDEM004: Gender"
#| fig-alt: "Frequency bar plot of SDEM004 - Gender variable"
#| cap-location: margin

cpal <- RColorBrewer::brewer.pal(4, "Set1")

df.geam |> 
    ggplot(aes(x=SDEM004, fill=SDEM004)) + 
    geom_bar(width=.8) + 
    scale_fill_manual(values=cpal, na.value=cpal[4]) +
    guides(fill="none") +
    labs(x="", y="") +
    theme_light()

```

Since

### Age

The age of respondents is by default captured as a integer input field (`SDEM001` - "In which year were you born?").

```{r}
#| echo: false
#| label: fig-sdem001-year
#| fig.cap: "Frequency chart of year of birth"
#| fig-alt: "Frequency bar plot of SDEM001 - Age variable"
#| cap-location: margin

df.geam2 |>  
    filter(!is.na(SDEM001)) |>
    ggplot(aes(x=SDEM001)) + 
    geom_bar(width=0.8) + 
    labs(x="", y="") +
    theme_light()
```

Most statistical analysis will work with aggregated age groups. The GEAM reporting template generates two groupings: 10 year steps, or 4 age groups: "Junior \< 30 years", "Middle 31-45 years", "Senior 46-65 years", and above "\> 65 years" of age.

In R, a small transformation is necessary to convert and aggregated the year of birth into binned age groups:

```{r}
#| label: birth-convert-age 

 
# retrieve current year 
curyear <- as.numeric(format(Sys.Date(), format="%Y"))

# calculate age of respondent for current year
df.geam2$age <- curyear - df.geam2$SDEM001

```

Now we are ready to subdivide each group according to the specified age groups with the 'cut()' command:

```{r}
#| label: age-aggregate-4g

# sub-divde age into 4 age groups:
df.geam2$age_4g <- cut(df.geam2$age,
                       c(0,30,45,65,100),
                       labels=c("Junior (<30)", "Middle (31-45)", "Senior (46-65)", "+65"))

```

And display the new aggregated age groups:

```{r}
#| echo: false
#| label: fig-sdem001-age-4g
#| fig.cap: "Frequency chart of aggregated age groups"
#| fig-alt: "Frequency bar plot of aggregated age variable"
#| cap-location: margin

df.geam2 |>  
    ggplot(aes(x=age_4g)) + 
    geom_bar(width=0.8) + 
    labs(x="", y="") +
    theme_light()

```

```{r}
#| echo: false
#| label: tbl-age-4g
#| tbl-cap: "Frequency table of aggregated age groups"
#| cap-location: margin

df.geam2 |>
  frq(age_4g) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
   kable_styling(bootstrap_options = c("striped"))

```

Other GEAM questionnaires have modified 'SDEM001' before the launch and ask for aggregate age groups from the very outset.

```{r}
#| echo: false
#| label: fig-sdem001
#| fig.cap: "Frequency chart of age groups"
#| fig-alt: "Frequency bar plot of SDEM001 - aggregated age variable"
#| cap-location: margin

df.geam |>  
    filter(!is.na(SDEM001)) |>
    ggplot(aes(x=SDEM001)) + 
    geom_bar(width=0.8) + 
    labs(x="", y="") +
    theme_light()
```




### Current marital or partnership status

+---------+------------------------------------------------------------------+-----------------------------------------------------------------+
| Code    | Question                                                         | Responses                                                       |
+=========+==================================================================+=================================================================+
| SDEM006 | Which best describes your current marital or partnership status? | \[1\] Single and never married or never in a civil partnership\ |
|         |                                                                  | \[2\] Married or in a civil partnership\                        |
|         |                                                                  | \[3\] Cohabiting\                                               |
|         |                                                                  | \[4\] Separated\                                                |
|         |                                                                  | \[5\] Divorced\                                                 |
|         |                                                                  | \[6\] Widowed\                                                  |
|         |                                                                  | \[7\] Prefer not to say\                                        |
|         |                                                                  | \[8\] I prefer to label my current partnership as               |
+---------+------------------------------------------------------------------+-----------------------------------------------------------------+

```{r}
#| echo: false
#| label: tbl-partnership
#| tbl-cap: "Frequency table of martial and partnership status"
#| cap-location: margin

df.geam2 |>
  frq(SDEM006) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_styling(bootstrap_options = c("striped"))

```

```{r}
#| echo: false
#| label: fig-sdem006
#| fig.cap: "Bar chart of martial and partnership status"
#| fig-alt: "Frequency bar plot of SDEM006 - martial and partnership status"
#| cap-location: margin

cpal <- RColorBrewer::brewer.pal(6, "Set1")

df.geam2 |> 
  ggplot(aes(x=SDEM006, fill=SDEM006)) + 
  geom_bar(width=.8) + 
  scale_fill_manual(values=cpal, na.value=cpal[6]) +
  scale_x_discrete(labels = function(x) str_wrap(x, width = 15)) +
  guides(fill="none") +
  labs(x="", y="") + 
  theme_light()

```


### Ethnic mayority or minority status

The GEAM inquires about ethnic minority or mayority status in question `SDEM002`:

+-----------+-----------------------------------------------------------------------------------------------------+-------------------------+
| Code      | Question                                                                                            | Responses               |
+===========+=====================================================================================================+=========================+
| `SDEM002` | Do you currently perceive yourself to be part of a majority or minority ethnic or racialized group? | \[1\] Majority\         |
|           |                                                                                                     | \[2\] Minority\         |
|           |                                                                                                     | \[3\] Unsure\           |
|           |                                                                                                     | \[4\] Prefer not to say |
+-----------+-----------------------------------------------------------------------------------------------------+-------------------------+

As this question is not mandatory, there are likely to be a larger amount of `NA` entries that need to be removed in subsequent analysis.

```{r}
#| echo: false
#| label: tbl-ethnic
#| tbl-cap: "Frequency table of ethnic mayority / minority status"
#| cap-location: margin

df.geam |>
  frq(SDEM002) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
   kable_styling(bootstrap_options = c("striped"))

```

```{r}
#| echo: false
#| label: fig-sdem002
#| fig.cap: "Ethnic minority /majority status"
#| fig-alt: "Frequency bar plot of SDEM002 - Ethnic minority / majority status"
#| cap-location: margin

cpal <- RColorBrewer::brewer.pal(5, "Set1")

df.geam |> 
  ggplot(aes(x=SDEM002, fill=SDEM002)) + 
  geom_bar(width=.8) + 
  scale_fill_manual(values=cpal, na.value=cpal[5]) +
  guides(fill="none") +
  labs(x="", y="") + 
  theme_light()

```



### Country of birth and main citizenship

```{r}
#| echo: false
#| label: tbl-country-birth
#| tbl-cap: "Frequency table of SDEM012 - Country of birth"
#| cap-location: margin

df.geam |>
  frq(SDEM012) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
   kable_styling(bootstrap_options = c("striped"))

```


### Trans history 

```{r}
#| echo: false
#| label: tbl-transgender
#| tbl-cap: "Frequency table of SDEM005 - Trans history"
#| cap-location: margin

df.geam2 |>
  frq(SDEM005) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
   kable_styling(bootstrap_options = c("striped"))

```


### Sexual orientation 

```{r}
#| echo: false
#| label: tbl-sexorientation
#| tbl-cap: "Frequency table of SDEM007 - Sexual orientation"
#| cap-location: margin

df.geam |>
  frq(SDEM007) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
   kable_styling(bootstrap_options = c("striped"))

```


### Disability and/or health impairments

```{r}
#| echo: false
#| label: tbl-disability
#| tbl-cap: "Frequency table of SDEM009 - Disability and health impairments"
#| cap-location: margin

df.geam |>
  frq(SDEM009) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_styling()

```

### Educational level 

6 entries in other that need to be revised and reclassified. 

```{r}
#| echo: false
#| label: tbl-edu-level
#| tbl-cap: "Frequency table of SDEM016 - Highest educational level of respondent"
#| cap-location: margin

df.geam |>
  frq(SDEM016) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_styling()
```


### Socio-economic class

Composed of SDEM017 and SDEM018. 

```{r}
#| echo: false
#| label: tbl-socioeco
#| tbl-cap: "Frequency table of SDEM017 - Educational level"
#| cap-location: margin

df.geam |>
  frq(SDEM017) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_classic()
```


## Working conditions

The socio-demographic variables can then be explored in relation to working conditions. 

### Job position

```{r}
#| echo: false
#| label: tbl-wcjc001
#| tbl-cap: "Frequency table of WCJC001 - Job position"
#| cap-location: margin

df.geam |>
  frq(WCJC001) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_classic()
```



Scientific discipline. 

Leadership positions. 


### Type of contract 

```{r}
#| echo: false
#| label: tbl-wcjc010
#| tbl-cap: "Frequency table of WCJC010 part-time/full-time contract"
#| cap-location: margin

df.geam |>
  frq(WCJC010) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_classic()
```


Fixed-term WCJC011 has not be used in this dataset. 



### Salary 


```{r}
#| echo: false
#| label: tbl-wcjc005
#| tbl-cap: "Frequency table of WCJC005 - Salary"
#| cap-location: margin

df.geam |>
  frq(WCJC005) |>
  kbl(col.names=c("label", "short", "count", "%", "valid %", "cum %")) |>
  kable_classic()
```


Show via figures and tables the distribution without statistical tests at this point. 




## References {.unnumbered}
